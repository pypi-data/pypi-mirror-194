"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[4805],{64805:(e,t,n)=>{n.r(t),n.d(t,{Commands:()=>W,default:()=>R,tabSpaceStatus:()=>B});var o=n(97390),r=n(44525),a=n(11040),i=n(11834),d=n(5736),c=n(32986),l=n(31099),s=n(29928),u=n(17904),m=n(75858),g=n(69198),p=n(32344),f=n(24787),C=n(28759),v=n(99828),b=n(47728),h=n(83124),w=n(34948),_=n(54629),k=n(69243);const x="notebook:toggle-autoclosing-brackets",y="console:toggle-autoclosing-brackets";var S;!function(e){e.createNew="fileeditor:create-new",e.createNewMarkdown="fileeditor:create-new-markdown-file",e.changeFontSize="fileeditor:change-font-size",e.lineNumbers="fileeditor:toggle-line-numbers",e.currentLineNumbers="fileeditor:toggle-current-line-numbers",e.lineWrap="fileeditor:toggle-line-wrap",e.currentLineWrap="fileeditor:toggle-current-line-wrap",e.changeTabs="fileeditor:change-tabs",e.matchBrackets="fileeditor:toggle-match-brackets",e.currentMatchBrackets="fileeditor:toggle-current-match-brackets",e.autoClosingBrackets="fileeditor:toggle-autoclosing-brackets",e.autoClosingBracketsUniversal="fileeditor:toggle-autoclosing-brackets-universal",e.createConsole="fileeditor:create-console",e.replaceSelection="fileeditor:replace-selection",e.restartConsole="fileeditor:restart-console",e.runCode="fileeditor:run-code",e.runAllCode="fileeditor:run-all",e.markdownPreview="fileeditor:markdown-preview",e.undo="fileeditor:undo",e.redo="fileeditor:redo",e.cut="fileeditor:cut",e.copy="fileeditor:copy",e.paste="fileeditor:paste",e.selectAll="fileeditor:select-all",e.invokeCompleter="completer:invoke-file",e.selectCompleter="completer:select-file",e.openCodeViewer="code-viewer:open"}(S||(S={}));const T="Editor",I=["autoClosingBrackets","codeFolding","cursorBlinkRate","fontFamily","fontSize","insertSpaces","lineHeight","lineNumbers","lineWrap","matchBrackets","readOnly","rulers","showTrailingSpace","tabSize","wordWrapColumn"];function E(e){const t={...e};for(let t of Object.keys(e))I.includes(t)||delete e[t];return t}let M=E(a.CodeEditor.defaultConfig);var W;!function(e){function t(e){e.editor.setOptions({...M})}function n(e){const t=e.getSelection(),{start:n,end:o}=t;return n.column!==o.column||n.line!==o.line}function o(e){const t=e.getSelection(),n=e.getOffsetAt(t.start),o=e.getOffsetAt(t.end);return e.model.sharedModel.getSource().substring(n,o)}async function i(e,t,n="txt"){const o=await e.execute("docmanager:new-untitled",{path:t,type:"file",ext:n});if(null!=o){const t=await e.execute("docmanager:open",{path:o.path,factory:T});return t.isUntitled=!0,t}}function d(e,t){e.add({command:S.createNew,category:t.__("Other"),rank:1})}function c(e,t){e.add({command:S.createNewMarkdown,category:t.__("Other"),rank:2})}function l(e,t){const n=t.__("Text Editor"),o=S.changeTabs;e.addItem({command:o,args:{insertSpaces:!1,size:4},category:n});for(const t of[1,2,4,8]){const r={insertSpaces:!0,size:t};e.addItem({command:o,args:r,category:n})}}function s(e,t){const n=t.__("Text Editor");e.addItem({command:S.createNew,args:{isPalette:!0},category:n})}function u(e,t){const n=t.__("Text Editor");e.addItem({command:S.createNewMarkdown,args:{isPalette:!0},category:n})}function m(e,t){const n=t.__("Text Editor"),o=S.changeFontSize;let r={delta:1};e.addItem({command:o,args:r,category:n}),r={delta:-1},e.addItem({command:o,args:r,category:n})}function g(e,t){const n=e=>e.context&&!!t.find((t=>{var n;return(null===(n=t.sessionContext.session)||void 0===n?void 0:n.path)===e.context.path}));e.runMenu.codeRunners.restart.add({id:S.restartConsole,isEnabled:n}),e.runMenu.codeRunners.run.add({id:S.runCode,isEnabled:n}),e.runMenu.codeRunners.runAll.add({id:S.runAllCode,isEnabled:n})}e.updateSettings=function(e,t){M=E({...a.CodeEditor.defaultConfig,...e.get("editorConfig").composite}),t.notifyCommandChanged()},e.updateTracker=function(e){e.forEach((e=>{t(e.content)}))},e.updateWidget=t,e.addCommands=function(e,t,a,d,c,l,s,u,m,g){e.addCommand(S.changeFontSize,{execute:e=>{const n=Number(e.delta);if(Number.isNaN(n))return void console.error(`${S.changeFontSize}: delta arg must be a number`);const o=window.getComputedStyle(document.documentElement),r=parseInt(o.getPropertyValue("--jp-code-font-size"),10),a=M.fontSize||r;return M.fontSize=a+n,t.set(d,"editorConfig",M).catch((e=>{console.error(`Failed to set ${d}: ${e.message}`)}))},label:e=>{var t;return(null!==(t=e.delta)&&void 0!==t?t:0)>0?e.isMenu?a.__("Increase Text Editor Font Size"):a.__("Increase Font Size"):e.isMenu?a.__("Decrease Text Editor Font Size"):a.__("Decrease Font Size")}}),e.addCommand(S.lineNumbers,{execute:()=>(M.lineNumbers=!M.lineNumbers,t.set(d,"editorConfig",M).catch((e=>{console.error(`Failed to set ${d}: ${e.message}`)}))),isEnabled:c,isToggled:()=>M.lineNumbers,label:a.__("Line Numbers")}),e.addCommand(S.currentLineNumbers,{label:a.__("Show Line Numbers"),execute:()=>{const e=l.currentWidget;if(!e)return;const t=!e.content.editor.getOption("lineNumbers");e.content.editor.setOption("lineNumbers",t)},isEnabled:c,isToggled:()=>{var e;const t=l.currentWidget;return null!==(e=null==t?void 0:t.content.editor.getOption("lineNumbers"))&&void 0!==e&&e}}),e.addCommand(S.lineWrap,{execute:e=>(M.lineWrap=e.mode||"off",t.set(d,"editorConfig",M).catch((e=>{console.error(`Failed to set ${d}: ${e.message}`)}))),isEnabled:c,isToggled:e=>{const t=e.mode||"off";return M.lineWrap===t},label:a.__("Word Wrap")}),e.addCommand(S.currentLineWrap,{label:a.__("Wrap Words"),execute:()=>{const e=l.currentWidget;if(!e)return;const t="off"===e.content.editor.getOption("lineWrap")?"on":"off";e.content.editor.setOption("lineWrap",t)},isEnabled:c,isToggled:()=>{var e;const t=l.currentWidget;return null!==(e="off"!==(null==t?void 0:t.content.editor.getOption("lineWrap")))&&void 0!==e&&e}}),e.addCommand(S.changeTabs,{label:e=>{var t;return e.insertSpaces?a.__("Spaces: %1",null!==(t=e.size)&&void 0!==t?t:0):a.__("Indent with Tab")},execute:e=>(M.tabSize=e.size||4,M.insertSpaces=!!e.insertSpaces,t.set(d,"editorConfig",M).catch((e=>{console.error(`Failed to set ${d}: ${e.message}`)}))),isToggled:e=>{const t=!!e.insertSpaces,n=e.size||4;return M.insertSpaces===t&&M.tabSize===n}}),e.addCommand(S.matchBrackets,{execute:()=>(M.matchBrackets=!M.matchBrackets,t.set(d,"editorConfig",M).catch((e=>{console.error(`Failed to set ${d}: ${e.message}`)}))),label:a.__("Match Brackets"),isEnabled:c,isToggled:()=>M.matchBrackets}),e.addCommand(S.currentMatchBrackets,{label:a.__("Match Brackets"),execute:()=>{const e=l.currentWidget;if(!e)return;const t=!e.content.editor.getOption("matchBrackets");e.content.editor.setOption("matchBrackets",t)},isEnabled:c,isToggled:()=>{var e;const t=l.currentWidget;return null!==(e=null==t?void 0:t.content.editor.getOption("matchBrackets"))&&void 0!==e&&e}}),e.addCommand(S.autoClosingBrackets,{execute:e=>{var n;return M.autoClosingBrackets=!!(null!==(n=e.force)&&void 0!==n?n:!M.autoClosingBrackets),t.set(d,"editorConfig",M).catch((e=>{console.error(`Failed to set ${d}: ${e.message}`)}))},label:a.__("Auto Close Brackets in Text Editor"),isToggled:()=>M.autoClosingBrackets}),e.addCommand(S.autoClosingBracketsUniversal,{execute:()=>{e.isToggled(S.autoClosingBrackets)||e.isToggled(x)||e.isToggled(y)?(e.execute(S.autoClosingBrackets,{force:!1}),e.execute(x,{force:!1}),e.execute(y,{force:!1})):(e.execute(S.autoClosingBrackets,{force:!0}),e.execute(x,{force:!0}),e.execute(y,{force:!0}))},label:a.__("Auto Close Brackets"),isToggled:()=>e.isToggled(S.autoClosingBrackets)||e.isToggled(x)||e.isToggled(y)}),e.addCommand(S.replaceSelection,{execute:e=>{var t,n;const o=e.text||"",r=l.currentWidget;r&&(null===(n=(t=r.content.editor).replaceSelection)||void 0===n||n.call(t,o))},isEnabled:c,label:a.__("Replace Selection in Editor")}),e.addCommand(S.createConsole,{execute:t=>{const n=l.currentWidget;if(n)return function(e){return async function(t,n){var o;const r=n||{},a=await e.execute("console:create",{activate:r.activate,name:null===(o=t.context.contentsModel)||void 0===o?void 0:o.name,path:t.context.path,preferredLanguage:t.context.model.defaultKernelLanguage,ref:t.id,insertMode:"split-bottom"});t.context.pathChanged.connect(((e,n)=>{var o;a.session.setPath(n),a.session.setName(null===(o=t.context.contentsModel)||void 0===o?void 0:o.name)}))}}(e)(n,t)},isEnabled:c,icon:_.consoleIcon,label:a.__("Create Console for Editor")}),e.addCommand(S.restartConsole,{execute:async()=>{var e;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;if(!t||null===m)return;const n=m.find((e=>{var n;return(null===(n=e.sessionContext.session)||void 0===n?void 0:n.path)===t.context.path}));return n?(g||r.sessionContextDialogs).restart(n.sessionContext):void 0},label:a.__("Restart Kernel"),isEnabled:()=>null!==m&&c()}),e.addCommand(S.runCode,{execute:()=>{var t;const n=null===(t=l.currentWidget)||void 0===t?void 0:t.content;if(!n)return;let o="";const r=n.editor,a=n.context.path,i=w.PathExt.extname(a),d=r.getSelection(),{start:c,end:s}=d;let u=c.column!==s.column||c.line!==s.line;if(u){const e=r.getOffsetAt(d.start),t=r.getOffsetAt(d.end);o=r.model.sharedModel.getSource().substring(e,t)}else if(w.MarkdownCodeBlocks.isMarkdown(i)){const e=r.model.sharedModel.getSource(),t=w.MarkdownCodeBlocks.findMarkdownCodeBlocks(e);for(const e of t)if(e.startLine<=c.line&&c.line<=e.endLine){o=e.code,u=!0;break}}if(!u){o=r.getLine(d.start.line);const e=r.getCursorPosition();if(e.line+1===r.lineCount){const e=r.model.sharedModel.getSource();r.model.sharedModel.setSource(e+"\n")}r.setCursorPosition({line:e.line+1,column:e.column})}return o?e.execute("console:inject",{activate:!1,code:o,path:a}):Promise.resolve(void 0)},isEnabled:c,label:a.__("Run Selected Code")}),e.addCommand(S.runAllCode,{execute:()=>{var t;const n=null===(t=l.currentWidget)||void 0===t?void 0:t.content;if(!n)return;let o="";const r=n.editor.model.sharedModel.getSource(),a=n.context.path,i=w.PathExt.extname(a);if(w.MarkdownCodeBlocks.isMarkdown(i)){const e=w.MarkdownCodeBlocks.findMarkdownCodeBlocks(r);for(const t of e)o+=t.code}else o=r;return o?e.execute("console:inject",{activate:!1,code:o,path:a}):Promise.resolve(void 0)},isEnabled:c,label:a.__("Run All Code")}),e.addCommand(S.markdownPreview,{execute:()=>{const t=l.currentWidget;if(!t)return;const n=t.context.path;return e.execute("markdownviewer:open",{path:n,options:{mode:"split-right"}})},isVisible:()=>{const e=l.currentWidget;return e&&".md"===w.PathExt.extname(e.context.path)||!1},icon:_.markdownIcon,label:a.__("Show Markdown Preview")}),e.addCommand(S.createNew,{label:e=>{var t,n;return e.isPalette?null!==(t=e.paletteLabel)&&void 0!==t?t:a.__("New Text File"):null!==(n=e.launcherLabel)&&void 0!==n?n:a.__("Text File")},caption:e=>{var t;return null!==(t=e.caption)&&void 0!==t?t:a.__("Create a new text file")},icon:e=>{var t;return e.isPalette?void 0:_.LabIcon.resolve({icon:null!==(t=e.iconName)&&void 0!==t?t:_.textEditorIcon})},execute:t=>{var n;const o=t.cwd||s.model.path;return i(e,o,null!==(n=t.fileExt)&&void 0!==n?n:"txt")}}),e.addCommand(S.createNewMarkdown,{label:e=>e.isPalette?a.__("New Markdown File"):a.__("Markdown File"),caption:a.__("Create a new markdown file"),icon:e=>e.isPalette?void 0:_.markdownIcon,execute:t=>{const n=t.cwd||s.model.path;return i(e,n,"md")}}),e.addCommand(S.undo,{execute:()=>{var e;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;t&&t.editor.undo()},isEnabled:()=>{var e;return!!c()&&!!(null===(e=l.currentWidget)||void 0===e?void 0:e.content)},icon:_.undoIcon.bindprops({stylesheet:"menuItem"}),label:a.__("Undo")}),e.addCommand(S.redo,{execute:()=>{var e;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;t&&t.editor.redo()},isEnabled:()=>{var e;return!!c()&&!!(null===(e=l.currentWidget)||void 0===e?void 0:e.content)},icon:_.redoIcon.bindprops({stylesheet:"menuItem"}),label:a.__("Redo")}),e.addCommand(S.cut,{execute:()=>{var e;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;if(!t)return;const n=t.editor,a=o(n);r.Clipboard.copyToSystem(a),n.replaceSelection&&n.replaceSelection("")},isEnabled:()=>{var e;if(!c())return!1;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;return!!t&&n(t.editor)},icon:_.cutIcon.bindprops({stylesheet:"menuItem"}),label:a.__("Cut")}),e.addCommand(S.copy,{execute:()=>{var e;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;if(!t)return;const n=o(t.editor);r.Clipboard.copyToSystem(n)},isEnabled:()=>{var e;if(!c())return!1;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;return!!t&&n(t.editor)},icon:_.copyIcon.bindprops({stylesheet:"menuItem"}),label:a.__("Copy")}),e.addCommand(S.paste,{execute:async()=>{var e;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;if(!t)return;const n=t.editor,o=window.navigator.clipboard,r=await o.readText();r&&n.replaceSelection&&n.replaceSelection(r)},isEnabled:()=>{var e;return Boolean(c()&&(null===(e=l.currentWidget)||void 0===e?void 0:e.content))},icon:_.pasteIcon.bindprops({stylesheet:"menuItem"}),label:a.__("Paste")}),e.addCommand(S.selectAll,{execute:()=>{var e;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;t&&t.editor.execCommand(k.selectAll)},isEnabled:()=>{var e;return Boolean(c()&&(null===(e=l.currentWidget)||void 0===e?void 0:e.content))},label:a.__("Select All")})},e.addCompleterCommands=function(e,t,n,o){const r=(null!=o?o:v.nullTranslator).load("jupyterlab");e.addCommand(S.invokeCompleter,{label:r.__("Display the completion helper."),execute:()=>{const e=t.currentWidget&&t.currentWidget.id;if(e)return n.invoke(e)}}),e.addCommand(S.selectCompleter,{label:r.__("Select the completion suggestion."),execute:()=>{const e=t.currentWidget&&t.currentWidget.id;if(e)return n.select(e)}}),e.addKeyBinding({command:S.selectCompleter,keys:["Enter"],selector:".jp-FileEditor .jp-mod-completer-active"})},e.addLauncherItems=function(e,t){d(e,t),c(e,t)},e.addCreateNewToLauncher=d,e.addCreateNewMarkdownToLauncher=c,e.addKernelLanguageLauncherItems=function(e,t,n){for(let o of n)e.add({command:S.createNew,category:t.__("Other"),rank:3,args:o})},e.addPaletteItems=function(e,t){l(e,t),s(e,t),u(e,t),m(e,t)},e.addChangeTabsCommandsToPalette=l,e.addCreateNewCommandToPalette=s,e.addCreateNewMarkdownCommandToPalette=u,e.addChangeFontSizeCommandsToPalette=m,e.addKernelLanguagePaletteItems=function(e,t,n){const o=t.__("Text Editor");for(let t of n)e.addItem({command:S.createNew,args:{...t,isPalette:!0},category:o})},e.addMenuItems=function(e,t,n,o){e.editMenu.undoers.redo.add({id:S.redo,isEnabled:o}),e.editMenu.undoers.undo.add({id:S.undo,isEnabled:o}),e.viewMenu.editorViewers.toggleLineNumbers.add({id:S.currentLineNumbers,isEnabled:o}),e.viewMenu.editorViewers.toggleMatchBrackets.add({id:S.currentMatchBrackets,isEnabled:o}),e.viewMenu.editorViewers.toggleWordWrap.add({id:S.currentLineWrap,isEnabled:o}),e.fileMenu.consoleCreators.add({id:S.createConsole,isEnabled:o}),n&&g(e,n)},e.addKernelLanguageMenuItems=function(e,t){for(let n of t)e.fileMenu.newMenu.addItem({command:S.createNew,args:n,rank:31})},e.addCodeRunnersToRunMenu=g,e.addOpenCodeViewerCommand=function(e,t,n,o){e.commands.addCommand(S.openCodeViewer,{label:o.__("Open Code Viewer"),execute:i=>(async i=>{var d;const c=t.factoryService.newDocumentEditor;let l=i.mimeType;!l&&i.extension&&(l=t.mimeTypeService.getMimeTypeByFilePath(`temp.${i.extension.replace(/\\.$/,"")}`));const s=a.CodeViewerWidget.createCodeViewer({factory:e=>c(e),content:i.content,mimeType:l});s.title.label=i.label||o.__("Code Viewer"),s.title.caption=s.title.label;const u=(0,b.find)(e.docRegistry.fileTypes(),(e=>!!l&&e.mimeTypes.includes(l)));s.title.icon=null!==(d=null==u?void 0:u.icon)&&void 0!==d?d:_.textEditorIcon,i.widgetId&&(s.id=i.widgetId);const m=new r.MainAreaWidget({content:s});return await n.add(m),e.shell.add(m,"main"),s})(i)})}}(W||(W={}));const P={activate:function(e,t,n,o,a,i,d,c,l,u,m,g,p,f){const C=P.id,v=i.load("jupyterlab");let b;f&&(b=(0,r.createToolbarFactory)(f,a,T,C,i));const h=new s.FileEditorFactory({editorServices:t,factoryOptions:{name:T,label:v.__("Editor"),fileTypes:["markdown","*"],defaultFor:["markdown","*"],toolbarFactory:b,translator:i}}),{commands:w,restored:_,shell:k}=e,x=new r.WidgetTracker({namespace:"editor"}),y=()=>null!==x.currentWidget&&x.currentWidget===k.currentWidget,I=new Map([["python",[{fileExt:"py",iconName:"ui-components:python",launcherLabel:v.__("Python File"),paletteLabel:v.__("New Python File"),caption:v.__("Create a new Python file")}]],["julia",[{fileExt:"jl",iconName:"ui-components:julia",launcherLabel:v.__("Julia File"),paletteLabel:v.__("New Julia File"),caption:v.__("Create a new Julia file")}]],["R",[{fileExt:"r",iconName:"ui-components:r-kernel",launcherLabel:v.__("R File"),paletteLabel:v.__("New R File"),caption:v.__("Create a new R file")}]]]);m&&m.restore(x,{command:"docmanager:open",args:e=>({path:e.context.path,factory:T}),name:e=>e.context.path}),Promise.all([a.load(C),_]).then((([e])=>{W.updateSettings(e,w),W.updateTracker(x),e.changed.connect((()=>{W.updateSettings(e,w),W.updateTracker(x)}))})).catch((e=>{console.error(e.message),W.updateTracker(x)})),h.widgetCreated.connect(((e,t)=>{t.context.pathChanged.connect((()=>{x.save(t)})),x.add(t),W.updateWidget(t.content)})),e.docRegistry.addWidgetFactory(h),x.widgetAdded.connect(((e,t)=>{W.updateWidget(t.content)})),W.addCommands(w,a,v,C,y,x,n,o,d,g);const E=new r.WidgetTracker({namespace:"codeviewer"});return m&&m.restore(E,{command:S.openCodeViewer,args:e=>({content:e.content.content,label:e.content.title.label,mimeType:e.content.mimeType,widgetId:e.content.id}),name:e=>e.content.id}),W.addOpenCodeViewerCommand(e,t,E,v),l&&W.addLauncherItems(l,v),c&&W.addPaletteItems(c,v),u&&W.addMenuItems(u,x,d,y),(async()=>{var t,n;const o=e.serviceManager.kernelspecs;await o.ready;let r=new Set;const a=null!==(n=null===(t=o.specs)||void 0===t?void 0:t.kernelspecs)&&void 0!==n?n:{};return Object.keys(a).forEach((e=>{const t=a[e];if(t){const e=I.get(t.language);null==e||e.forEach((e=>r.add(e)))}})),r})().then((e=>{l&&W.addKernelLanguageLauncherItems(l,v,e),c&&W.addKernelLanguagePaletteItems(c,v,e),u&&W.addKernelLanguageMenuItems(u,e)})).catch((e=>{console.error(e.message)})),p&&(p.add(new s.LaTeXTableOfContentsFactory(x)),p.add(new s.MarkdownTableOfContentsFactory(x)),p.add(new s.PythonTableOfContentsFactory(x))),x},id:"@jupyterlab/fileeditor-extension:plugin",requires:[a.IEditorServices,l.IDefaultFileBrowser,l.IFileBrowserFactory,p.ISettingRegistry,v.ITranslator],optional:[d.IConsoleTracker,r.ICommandPalette,u.ILauncher,g.IMainMenu,o.ILayoutRestorer,r.ISessionContextDialogs,C.ITableOfContentsRegistry,r.IToolbarWidgetRegistry],provides:s.IEditorTracker,autoStart:!0},B={id:"@jupyterlab/fileeditor-extension:tab-space-status",autoStart:!0,requires:[s.IEditorTracker,p.ISettingRegistry,v.ITranslator],optional:[f.IStatusBar],activate:(e,t,n,o,r)=>{const i=o.load("jupyterlab");if(!r)return;const d=new h.Menu({commands:e.commands}),c="fileeditor:change-tabs",{shell:l}=e,u={insertSpaces:!1,size:4,name:i.__("Indent with Tab")};d.addItem({command:c,args:u});for(const e of[1,2,4,8]){const t={insertSpaces:!0,size:e,name:i.__("Spaces: %1",e)};d.addItem({command:c,args:t})}const m=new s.TabSpaceStatus({menu:d,translator:o}),g=e=>{m.model.config={...a.CodeEditor.defaultConfig,...e.get("editorConfig").composite}};Promise.all([n.load("@jupyterlab/fileeditor-extension:plugin"),e.restored]).then((([e])=>{g(e),e.changed.connect(g)})),r.registerStatusItem("@jupyterlab/fileeditor-extension:tab-space-status",{item:m,align:"right",rank:1,isActive:()=>!!l.currentWidget&&t.has(l.currentWidget)})}},F={id:"@jupyterlab/fileeditor-extension:cursor-position",activate:(e,t,n)=>{n.addEditorProvider((e=>Promise.resolve(e&&t.has(e)?e.content.editor:null)))},requires:[s.IEditorTracker,a.IPositionModel],autoStart:!0},N={id:"@jupyterlab/fileeditor-extension:completer",requires:[s.IEditorTracker],optional:[i.ICompletionProviderManager,v.ITranslator,r.ISanitizer],activate:function(e,t,n,o,a){if(!n)return;W.addCompleterCommands(e.commands,t,n,o);const i=e.serviceManager.sessions,d=null!=a?a:new r.Sanitizer,c=new Map,l=async(e,t)=>{const o={editor:t.content.editor,widget:t};await n.updateCompleter(o);const r=(e,o)=>{const r=c.get(t.id),a=(0,b.find)(o,(e=>e.path===t.context.path));if(a){if(r&&r.id===a.id)return;r&&(c.delete(t.id),r.dispose());const e=i.connectTo({model:a}),o={editor:t.content.editor,widget:t,session:e,sanitizer:d};n.updateCompleter(o).catch(console.error),c.set(t.id,e)}else r&&(c.delete(t.id),r.dispose())};r(0,Array.from(i.running())),i.runningChanged.connect(r),t.disposed.connect((()=>{i.runningChanged.disconnect(r);const e=c.get(t.id);e&&(c.delete(t.id),e.dispose())}))};t.widgetAdded.connect(l),n.activeProvidersChanged.connect((()=>{t.forEach((e=>{l(0,e).catch(console.error)}))}))},autoStart:!0},L={id:"@jupyterlab/fileeditor-extension:search",requires:[c.ISearchProviderRegistry],autoStart:!0,activate:(e,t)=>{t.add("jp-fileeditorSearchProvider",s.FileEditorSearchProvider)}},O={id:"@jupyterlab/fileeditor-extension:language-server",requires:[s.IEditorTracker,m.ILSPDocumentConnectionManager,m.ILSPFeatureManager,m.ILSPCodeExtractorsManager],activate:function(e,t,n,o,r){t.widgetAdded.connect((async(t,a)=>{const i=new s.FileEditorAdapter(a,{connectionManager:n,featureManager:o,foreignCodeExtractorsManager:r,docRegistry:e.docRegistry});n.registerAdapter(a.context.path,i)}))},autoStart:!0},R=[P,F,N,O,L,B]}}]);