"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[2184],{42184:(e,n,t)=>{t.r(n),t.d(n,{default:()=>x});var a=t(97390),o=t(44525),i=t(11040),r=t(5736),s=t(34948),l=t(84159),d=t(23095),c=t(29928),u=t(20088),g=t(49866),v=t(90459),b=t(32344),p=t(99828);function m(e){Object.values(l.Debugger.CommandIDs).forEach((n=>{e.commands.notifyCommandChanged(n)}))}const h={id:"@jupyterlab/debugger-extension:consoles",autoStart:!0,requires:[l.IDebugger,r.IConsoleTracker],optional:[a.ILabShell],activate:(e,n,t,a)=>{const o=new l.Debugger.Handler({type:"console",shell:e.shell,service:n}),i=async n=>{const{sessionContext:t}=n;await t.ready,await o.updateContext(n,t),m(e)};a?a.currentChanged.connect(((e,n)=>{const t=n.newValue;t instanceof r.ConsolePanel&&i(t)})):t.currentChanged.connect(((e,n)=>{n&&i(n)}))}},I={id:"@jupyterlab/debugger-extension:files",autoStart:!0,requires:[l.IDebugger,c.IEditorTracker],optional:[a.ILabShell],activate:(e,n,t,a)=>{const o=new l.Debugger.Handler({type:"file",shell:e.shell,service:n}),i={},r=async n=>{const t=e.serviceManager.sessions;try{const a=await t.findByPath(n.context.path);if(!a)return;let r=i[a.id];r||(r=t.connectTo({model:a}),i[a.id]=r),await o.update(n,r),m(e)}catch(e){return}};a?a.currentChanged.connect(((e,n)=>{const t=n.newValue;if(t instanceof d.DocumentWidget){const{content:e}=t;e instanceof c.FileEditor&&r(t)}})):t.currentChanged.connect(((e,n)=>{n&&r(n)}))}},f={id:"@jupyterlab/debugger-extension:notebooks",autoStart:!0,requires:[l.IDebugger,g.INotebookTracker,p.ITranslator],optional:[a.ILabShell,o.ICommandPalette],provides:l.IDebuggerHandler,activate:(e,n,t,a,i,r)=>{const s=new l.Debugger.Handler({type:"notebook",shell:e.shell,service:n}),d=a.load("jupyterlab");e.commands.addCommand(l.Debugger.CommandIDs.restartDebug,{label:d.__("Restart Kernel and Debug…"),caption:d.__("Restart Kernel and Debug…"),isEnabled:()=>n.isStarted,execute:async()=>{const e=n.getDebuggerState();await n.stop();const a=t.currentWidget;if(!a)return;const{content:i,sessionContext:r}=a;await o.sessionContextDialogs.restart(r)&&(await n.restoreDebuggerState(e),await s.updateWidget(a,r.session),await g.NotebookActions.runAll(i,r))}});const c=async n=>{if(n){const{sessionContext:e}=n;await e.ready,await s.updateContext(n,e)}m(e)};return i?i.currentChanged.connect(((e,n)=>{const t=n.newValue;t instanceof g.NotebookPanel&&c(t)})):t.currentChanged.connect(((e,n)=>{n&&c(n)})),r&&r.addItem({category:"Notebook Operations",command:l.Debugger.CommandIDs.restartDebug}),s}},C={id:"@jupyterlab/debugger-extension:service",autoStart:!0,provides:l.IDebugger,requires:[l.IDebuggerConfig],optional:[l.IDebuggerSources,p.ITranslator],activate:(e,n,t,a)=>new l.Debugger.Service({config:n,debuggerSources:t,specsManager:e.serviceManager.kernelspecs,translator:a})},y={id:"@jupyterlab/debugger-extension:config",provides:l.IDebuggerConfig,autoStart:!0,activate:()=>new l.Debugger.Config},D={id:"@jupyterlab/debugger-extension:sources",autoStart:!0,provides:l.IDebuggerSources,requires:[l.IDebuggerConfig,i.IEditorServices],optional:[g.INotebookTracker,r.IConsoleTracker,c.IEditorTracker],activate:(e,n,t,a,o,i)=>new l.Debugger.Sources({config:n,shell:e.shell,editorServices:t,notebookTracker:a,consoleTracker:o,editorTracker:i})},_={id:"@jupyterlab/debugger-extension:variables",autoStart:!0,requires:[l.IDebugger,l.IDebuggerHandler,p.ITranslator],optional:[o.IThemeManager,v.IRenderMimeRegistry],activate:(e,n,t,a,i,r)=>{const s=a.load("jupyterlab"),{commands:d,shell:c}=e,u=new o.WidgetTracker({namespace:"debugger/inspect-variable"}),v=new o.WidgetTracker({namespace:"debugger/render-variable"}),b=l.Debugger.CommandIDs;d.addCommand(b.inspectVariable,{label:s.__("Inspect Variable"),caption:s.__("Inspect Variable"),isEnabled:e=>{var t,a,o,i;return!!(null===(t=n.session)||void 0===t?void 0:t.isStarted)&&(null!==(i=null!==(a=e.variableReference)&&void 0!==a?a:null===(o=n.model.variables.selectedVariable)||void 0===o?void 0:o.variablesReference)&&void 0!==i?i:0)>0},execute:async e=>{var t,a,r,s;let{variableReference:g,name:v}=e;g||(g=null===(t=n.model.variables.selectedVariable)||void 0===t?void 0:t.variablesReference),v||(v=null===(a=n.model.variables.selectedVariable)||void 0===a?void 0:a.name);const b=`jp-debugger-variable-${v}`;if(!v||!g||u.find((e=>e.id===b)))return;const p=await n.inspectVariable(g);if(!p||0===p.length)return;const m=n.model.variables,h=new o.MainAreaWidget({content:new l.Debugger.VariablesGrid({model:m,commands:d,scopes:[{name:v,variables:p}],themeManager:i})});h.addClass("jp-DebuggerVariables"),h.id=b,h.title.icon=l.Debugger.Icons.variableIcon,h.title.label=`${null===(s=null===(r=n.session)||void 0===r?void 0:r.connection)||void 0===s?void 0:s.name} - ${v}`,u.add(h);const I=()=>{h.dispose(),m.changed.disconnect(I)};m.changed.connect(I),c.add(h,"main",{mode:u.currentWidget?"split-right":"split-bottom",activate:!1,type:"Debugger Variables"})}}),d.addCommand(b.renderMimeVariable,{label:s.__("Render Variable"),caption:s.__("Render variable according to its mime type"),isEnabled:()=>{var e;return!!(null===(e=n.session)||void 0===e?void 0:e.isStarted)},isVisible:()=>n.model.hasRichVariableRendering&&(null!==r||t.activeWidget instanceof g.NotebookPanel),execute:e=>{var o,i,s,d,u,b,p,m;let{name:h,frameId:I}=e;h||(h=null===(o=n.model.variables.selectedVariable)||void 0===o?void 0:o.name),I||(I=null===(i=n.model.callstack.frame)||void 0===i?void 0:i.id);const f=t.activeWidget;let C=f instanceof g.NotebookPanel?f.content.rendermime:r;if(!C)return;const y=`jp-debugger-variable-mime-${h}-${null===(d=null===(s=n.session)||void 0===s?void 0:s.connection)||void 0===d?void 0:d.path.replace("/","-")}`;if(!h||v.find((e=>e.id===y))||!I&&n.hasStoppedThreads())return;const D=n.model.variables,_=new l.Debugger.VariableRenderer({dataLoader:()=>n.inspectRichVariable(h,I),rendermime:C,translator:a});_.addClass("jp-DebuggerRichVariable"),_.id=y,_.title.icon=l.Debugger.Icons.variableIcon,_.title.label=`${h} - ${null===(b=null===(u=n.session)||void 0===u?void 0:u.connection)||void 0===b?void 0:b.name}`,_.title.caption=`${h} - ${null===(m=null===(p=n.session)||void 0===p?void 0:p.connection)||void 0===m?void 0:m.path}`,v.add(_);const S=()=>{_.dispose(),D.changed.disconnect(w),null==f||f.disposed.disconnect(S)},w=()=>{t.activeWidget===f&&_.refresh()};_.disposed.connect(S),D.changed.connect(w),null==f||f.disposed.connect(S),c.add(_,"main",{mode:v.currentWidget?"split-right":"split-bottom",activate:!1,type:"Debugger Variables"})}}),d.addCommand(b.copyToClipboard,{label:s.__("Copy to Clipboard"),caption:s.__("Copy text representation of the value to clipboard"),isEnabled:()=>{var e,t;return!!(null===(e=n.session)||void 0===e?void 0:e.isStarted)&&!!(null===(t=n.model.variables.selectedVariable)||void 0===t?void 0:t.value)},isVisible:()=>t.activeWidget instanceof g.NotebookPanel,execute:async()=>{const e=n.model.variables.selectedVariable.value;e&&o.Clipboard.copyToSystem(e)}})}},S={id:"@jupyterlab/debugger-extension:sidebar",provides:l.IDebuggerSidebar,requires:[l.IDebugger,i.IEditorServices,p.ITranslator],optional:[o.IThemeManager,b.ISettingRegistry],autoStart:!0,activate:async(e,n,t,a,o,i)=>{const{commands:r}=e,s=l.Debugger.CommandIDs,d={registry:r,continue:s.debugContinue,terminate:s.terminate,next:s.next,stepIn:s.stepIn,stepOut:s.stepOut,evaluate:s.evaluate},c={registry:r,pauseOnExceptions:s.pauseOnExceptions},u=new l.Debugger.Sidebar({service:n,callstackCommands:d,breakpointsCommands:c,editorServices:t,themeManager:o,translator:a});if(i){const e=await i.load(w.id),t=()=>{var t,a,o,i;const r=e.get("variableFilters").composite,s=null!==(i=null===(o=null===(a=null===(t=n.session)||void 0===t?void 0:t.connection)||void 0===a?void 0:a.kernel)||void 0===o?void 0:o.name)&&void 0!==i?i:"";s&&r[s]&&(u.variables.filter=new Set(r[s]));const l=e.get("defaultKernelSourcesFilter").composite;u.kernelSources.filter=l};t(),e.changed.connect(t),n.sessionChanged.connect(t)}return u}},w={id:"@jupyterlab/debugger-extension:main",requires:[l.IDebugger,l.IDebuggerSidebar,i.IEditorServices,p.ITranslator],optional:[o.ICommandPalette,l.IDebuggerSources,a.ILabShell,a.ILayoutRestorer,u.ILoggerRegistry,b.ISettingRegistry],autoStart:!0,activate:async(e,n,t,a,i,r,d,c,u,g,b)=>{var p;const h=i.load("jupyterlab"),{commands:I,shell:f,serviceManager:C}=e,{kernelspecs:y}=C,D=l.Debugger.CommandIDs;if("true"!==s.PageConfig.getOption("alwaysShowDebuggerExtension").toLowerCase()){await y.ready;const e=null===(p=y.specs)||void 0===p?void 0:p.kernelspecs;if(!e)return;const n=Object.keys(e).some((n=>{var t,a,o;return!(null===(o=null===(a=null===(t=e[n])||void 0===t?void 0:t.metadata)||void 0===a?void 0:a.debugger)||void 0===o||!o)}));if(!n)return}const _=new v.RenderMimeRegistry({initialFactories:v.standardRendererFactories});I.addCommand(D.evaluate,{label:h.__("Evaluate Code"),caption:h.__("Evaluate Code"),icon:l.Debugger.Icons.evaluateIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{var e,t,o;const i=await(async()=>{var e,t,o;const i=null===(t=null===(e=n.session)||void 0===e?void 0:e.connection)||void 0===t?void 0:t.kernel;if(!i)return"";const r=(await i.info).language_info.name;return null!==(o=null==a?void 0:a.mimeTypeService.getMimeTypeByLanguage({name:r}))&&void 0!==o?o:""})(),r=await l.Debugger.Dialogs.getCode({title:h.__("Evaluate Code"),okLabel:h.__("Evaluate"),cancelLabel:h.__("Cancel"),mimeType:i,rendermime:_}),s=r.value;if(!r.button.accept||!s)return;const d=await n.evaluate(s);if(d){const a=d.result,i=null===(t=null===(e=null==n?void 0:n.session)||void 0===e?void 0:e.connection)||void 0===t?void 0:t.path,r=i?null===(o=null==g?void 0:g.getLogger)||void 0===o?void 0:o.call(g,i):void 0;r?r.log({type:"text",data:a,level:r.level}):console.debug(a)}}}),I.addCommand(D.debugContinue,{label:()=>n.hasStoppedThreads()?h.__("Continue"):h.__("Pause"),caption:()=>n.hasStoppedThreads()?h.__("Continue"):h.__("Pause"),icon:()=>n.hasStoppedThreads()?l.Debugger.Icons.continueIcon:l.Debugger.Icons.pauseIcon,isEnabled:()=>{var e,t;return null!==(t=null===(e=n.session)||void 0===e?void 0:e.isStarted)&&void 0!==t&&t},execute:async()=>{n.hasStoppedThreads()?await n.continue():await n.pause(),I.notifyCommandChanged(D.debugContinue)}}),I.addCommand(D.terminate,{label:h.__("Terminate"),caption:h.__("Terminate"),icon:l.Debugger.Icons.terminateIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.restart(),m(e)}}),I.addCommand(D.next,{label:h.__("Next"),caption:h.__("Next"),icon:l.Debugger.Icons.stepOverIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.next()}}),I.addCommand(D.stepIn,{label:h.__("Step In"),caption:h.__("Step In"),icon:l.Debugger.Icons.stepIntoIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.stepIn()}}),I.addCommand(D.stepOut,{label:h.__("Step Out"),caption:h.__("Step Out"),icon:l.Debugger.Icons.stepOutIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.stepOut()}}),I.addCommand(D.pauseOnExceptions,{label:e=>e.filter||"Breakpoints on exception",caption:e=>e.description,isToggled:e=>{var t;return(null===(t=n.session)||void 0===t?void 0:t.isPausingOnException(e.filter))||!1},isEnabled:()=>n.pauseOnExceptionsIsValid(),execute:async e=>{var t,a,i;if(null==e?void 0:e.filter){let t=e.filter;await n.pauseOnExceptionsFilter(t)}else{let e=[];null===(a=null===(t=n.session)||void 0===t?void 0:t.exceptionBreakpointFilters)||void 0===a||a.forEach((n=>{e.push(n.filter)}));const r=await o.InputDialog.getMultipleItems({title:h.__("Select a filter for breakpoints on exception"),items:e,defaults:(null===(i=n.session)||void 0===i?void 0:i.currentExceptionFilters)||[]});let s=r.button.accept?r.value:null;null!==s&&await n.pauseOnExceptions(s)}}});let S=!1;if(b){const e=await b.load(w.id),n=()=>{S=e.get("autoCollapseDebuggerSidebar").composite};n(),e.changed.connect(n)}if(n.eventMessage.connect(((n,a)=>{m(e),c&&"initialized"===a.event?c.activateById(t.id):c&&t.isVisible&&"terminated"===a.event&&S&&c.collapseRight()})),n.sessionChanged.connect((n=>{m(e)})),u&&u.add(t,"debugger-sidebar"),t.node.setAttribute("role","region"),t.node.setAttribute("aria-label",h.__("Debugger section")),t.title.caption=h.__("Debugger"),f.add(t,"right",{type:"Debugger"}),I.addCommand(D.showPanel,{label:i.load("jupyterlab").__("Debugger Panel"),execute:()=>{f.activateById(t.id)}}),r){const e=h.__("Debugger");[D.debugContinue,D.terminate,D.next,D.stepIn,D.stepOut,D.evaluate,D.pauseOnExceptions].forEach((n=>{r.addItem({command:n,category:e})}))}if(d){const{model:e}=n,t=new l.Debugger.ReadOnlyEditorFactory({editorServices:a}),o=(e,t)=>{var a,o,i,r,s,c,u,g,v;d.find({focus:!0,kernel:null!==(r=null===(i=null===(o=null===(a=n.session)||void 0===a?void 0:a.connection)||void 0===o?void 0:o.kernel)||void 0===i?void 0:i.name)&&void 0!==r?r:"",path:null!==(u=null===(c=null===(s=n.session)||void 0===s?void 0:s.connection)||void 0===c?void 0:c.path)&&void 0!==u?u:"",source:null!==(v=null===(g=null==t?void 0:t.source)||void 0===g?void 0:g.path)&&void 0!==v?v:""}).forEach((e=>{requestAnimationFrame((()=>{e.reveal().then((()=>{const n=e.get();n&&l.Debugger.EditorHandler.showCurrentLine(n,t.line)}))}))}))},i=(e,a,o)=>{var i,r,c,u,g,v,b;if(!a)return;const{content:p,mimeType:m,path:h}=a,I=d.find({focus:!0,kernel:null!==(u=null===(c=null===(r=null===(i=n.session)||void 0===i?void 0:i.connection)||void 0===r?void 0:r.kernel)||void 0===c?void 0:c.name)&&void 0!==u?u:"",path:null!==(b=null===(v=null===(g=n.session)||void 0===g?void 0:g.connection)||void 0===v?void 0:v.path)&&void 0!==b?b:"",source:h});if(I.length>0)return void(o&&void 0!==o.line&&I.forEach((e=>{e.reveal().then((()=>{var n;null===(n=e.get())||void 0===n||n.revealPosition({line:o.line-1,column:o.column||0})}))})));const f=t.createNewEditor({content:p,mimeType:m,path:h}),C=f.editor,y=new l.Debugger.EditorHandler({debuggerService:n,editorReady:()=>Promise.resolve(C),getEditor:()=>C,path:h,src:C.model.sharedModel});f.disposed.connect((()=>y.dispose())),d.open({label:s.PathExt.basename(h),caption:h,editorWrapper:f});const D=n.model.callstack.frame;D&&l.Debugger.EditorHandler.showCurrentLine(C,D.line)},r=(e,n,t)=>{n&&i(null,n,t)};e.callstack.currentFrameChanged.connect(o),e.sources.currentSourceOpened.connect(i),e.kernelSources.kernelSourceOpened.connect(r),e.breakpoints.clicked.connect((async(e,t)=>{var a;const o=null===(a=t.source)||void 0===a?void 0:a.path,r=await n.getSource({sourceReference:0,path:o});i(null,r,t)}))}}},x=[C,h,I,f,_,S,w,D,y]}}]);